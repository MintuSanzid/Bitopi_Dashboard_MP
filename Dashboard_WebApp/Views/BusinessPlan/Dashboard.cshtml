

@{
    ViewBag.Title = "Update";
    Layout = "~/Views/Shared/_LayoutConfigurationHRF.cshtml";
}

<script src="~/Scripts/angular.js"></script>
<script type="text/javascript" src="~/Scripts/ngDialog.js"></script>
<link href="~/Content/ngDialog.css" rel="stylesheet" />
<link rel="stylesheet" href="~/Content/ngDialog.css">
<link rel="stylesheet" href="~/Content/ngDialog-theme-default.css">

<script src="~/Scripts/angular-resource.js"></script>
<script src="~/Scripts/angular-route.js"></script>
<script src="~/App/BusinessplanController.js"></script>

<link href="~/Content/Configuration/css/style.css" rel="stylesheet" />
<link href="http://fonts.googleapis.com/css?family=News+Cycle:400,700" rel='stylesheet' type='text/css'>
<link href="http://fonts.googleapis.com/css?family=Lobster" rel="stylesheet" type="text/css">

<link rel="stylesheet" type="text/css" href="http://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.0/css/jquery.dataTables_themeroller.css">
<link rel="stylesheet" type="text/css" href="http://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.0/css/jquery.dataTables.css">
<script type="text/javascript" charset="utf8" src="http://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.0/jquery.dataTables.min.js"></script>

<br />
<div class="body-content">
    <div ng-app="app" ng-controller="BusinessplanController" class="container-dash">
        <h2 class="" style="height: 75px;">

            <span class="">

                @*<span class="col-md-12" ng-class="{ 'has-error' : updateForm.status_update.$invalid && !updateForm.status_update.$pristine }">
                        <label class="col-md-4 col-sm-4 text-right"> Status : </label>
                        <select class="col-md-12 form-control" name="status_update" id="Pro_Status_Update" required ng-model="Pro_Status_Update" ng-options="object.StatusCode as object.Status for object in Pro_Statuses" style="width: 265px; margin-bottom: 5px;">
                            <option value=""> Select Status </option>
                        </select>
                        <span ng-show="updateForm.status_update.$invalid && !updateForm.status_update.$pristine" class="help-block"> status is required. </span>
                    </span>*@

                @*<div class="col-md-4">
                        <div class="form-group">
                            <label for="BuyerName"> Buyer Name</label>
                            <select ng-model="BuyerCode" ng-options="buyer.BuyerCode as buyer.BuyerName+'-('+buyer.BuyerCode+')' for buyer in Buyers" ng-change="ShowBusinessPlan()" class="form-control" required>
                                <option value=""> Select Buyer Name </option>
                            </select>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="merchant"> DMM Name</label>
                            <select ng-model="MerchantCode" ng-options="merchant.MerchantCode as merchant.MerchantName for merchant in Merchants" ng-change="ShowBusinessPlan()" class="form-control" required>
                                <option value=""> Select DMM Name </option>
                            </select>
                        </div>
                    </div>*@

                <div class="col-md-3">
                    <div class="form-group">
                        <label for=""> Company Name </label>
                        <select ng-model="CompanyCode" ng-options="company.CompanyCode as company.CompanyName for company in Companies" ng-change="ShowBusinessPlan()" class="form-control" required>
                            <option value="">Select Company Name </option>
                        </select>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-group">
                        <label for=""> Unit Name </label>
                        <select ng-model="UnitCode" ng-options="unit.UnitCode as unit.UnitName for unit in CompanyUnits" ng-change="ShowBusinessPlan()" class="form-control" required>
                            <option value=""> Select Unit Name </option>
                        </select>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-group">
                        <label for=""> Filter Type </label>
                        <select ng-model="FilterName" ng-options="filter.Name as filter.Name for filter in Filters" ng-change="ShowBusinessPlan()" class="form-control" required>
                            <option value="">Select Filter Type </option>
                        </select>
                    </div>
                </div>
            </span>
        </h2>
        <br />

        <div class="col-lg-12">
            <br />
            <br />
            <h4>
                <span class="">
                    <span class="h2"> Total Over View </span>
                    <table class="responsive-table table table-condensed table-striped" style="border: 1px solid white;">
                        <tr>
                            <th class="h6"> Name </th>
                            <th class="h6" ng-repeat="m in SetMonths">
                                <label id="{{$index+1-1}}Month" value="{{m}}" for="">{{m}} </label>
                            </th>
                        </tr>
                        <tr ng-repeat="b in Bsinessplans">
                            <td>
                                <label id="{{b.BusinessName}}" style="margin: 0px; font-size: 15px;" title="{{b.BusinessName}}" ng-click="OpenngDiologBP_Capacity($event)" class="btn btn-xs bg-blue"> {{b.BusinessName}} </label>
                            </td>
                            <td>{{b.Month1}}</td>
                            <td>{{b.Month2}}</td>
                            <td>{{b.Month3}}</td>
                            <td>{{b.Month4}}</td>
                            <td>{{b.Month5}}</td>
                            <td>{{b.Month6}}</td>
                            <td>{{b.Month7}}</td>
                            <td>{{b.Month8}}</td>
                            <td>{{b.Month9}}</td>
                            <td>{{b.Month10}}</td>
                            <td>{{b.Month11}}</td>
                            <td>{{b.Month12}}</td>
                        </tr>
                    </table>

                    <span class="">
                        <label>
                            <input type="radio" ng-model="color.name" value="ddmwise" ng-click="ShowBP_CapacityDetails($event)"> DMM Wise Details
                        </label>
                        <span class="col-md-2">
                            <label class="">
                                <input type="radio" ng-model="color.name" value="buyerwise" ng-click="ShowBP_CapacityDetails($event)"> Buyer Wise Details
                            </label>
                        </span>
                    </span>
                    <span class="warning col-md-offset-1"> {{Message}} </span>
                </span>
                <br />


            </h4>
            <br />
            <br />
            <h4 ng-show="buyerVar">
                <span class="">
                    <span class="h2"> {{Details}} </span>
                    <br />
                    <table style="margin-top: 0px !important;" class="table table-condensed table-bordered table-striped">
                        <thead>
                            <tr>
                                <th class=""> Buyer Name </th>
                                <th class=""> Buyer Wise Details </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="buyers in Buyerwise">
                                @*<td>{{$index+1}} </td>*@
                                <td ng-repeat="buyer in buyers" ng-init="isArr = isArray(buyer)">



                                    <table ng-if="isArr" class="responsive-table table-condensed" style="width: 99%">
                                        <thead>
                                            <tr>
                                                <th>
                                                    <button class="btn-info btn-xs" style="width: 25px;" ng-click="expanded = !expanded" expand><span ng-bind="expanded ? '-' : '+'"></span></button>
                                                </th>
                                                <th class="h6"> Name </th>
                                                <th class="h6" ng-repeat="m in SetMonths">
                                                    <label value="{{m}}" for="">{{m}} </label>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="capacities in buyer" ng-show="expanded">
                                                <td> {{$index+1}}</td>
                                                <td ng-repeat="capacity in capacities" ng-init="isArr = isArray(capacity)">

                                                    <span ng-if="!isArr">{{capacity}}</span>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>



                                    <span ng-if="!isArr">{{buyer}}</span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                   
                    @*<table class="responsive-table table table-condensed table-striped" style="border: 1px solid white;">
                        <tr>
                            <th class="h6"> Name </th>
                            <th class="h6" ng-repeat="m in SetMonths">
                                <label value="{{m}}" for="">{{m}} </label>
                            </th>
                        </tr>
                        <tr ng-repeat="b in CapacityBuyerwise">
                            <td>
                                <label style="margin: 0px; font-size: 15px;" title="{{b.BusinessName}}" ng-click="OpenngDiologBP_Capacity($event)" class="btn btn-xs bg-blue"> {{b.BusinessName}} </label>
                            </td>
                            <td>{{b.Month1}}</td>
                            <td>{{b.Month2}}</td>
                            <td>{{b.Month3}}</td>
                            <td>{{b.Month4}}</td>
                            <td>{{b.Month5}}</td>
                            <td>{{b.Month6}}</td>
                            <td>{{b.Month7}}</td>
                            <td>{{b.Month8}}</td>
                            <td>{{b.Month9}}</td>
                            <td>{{b.Month10}}</td>
                            <td>{{b.Month11}}</td>
                            <td>{{b.Month12}}</td>
                        </tr>
                    </table>*@
                    <span class="bg-red"> &nbsp; &nbsp; {{Message}} </span>
                </span>
            </h4>
            <br />
            <br />
        </div>

        @* -------------- Open *@
        <script type="text/ng-template" id="BP_CapacityDetails">
            <table style="margin-top: 0px !important;" class="table table-condensed table-bordered table-striped">
                <thead>
                    <tr>
                        <label> Capacity Items </label>
                        <th class="h6"> Capacity Details </th>
                        <th class="h6" ng-repeat="m in SetMonths">
                            <label id="{{$index+1-1}}Month" value="{{m}}" for="">{{m}} </label>
                        </th>
                    </tr>
                </thead>
                <thead>
                    <tr ng-repeat="b in Capacities">
                        <td>
                            {{b.BusinessName}}
                            @* //<a id="{{b.BusinessName}}" title="{{b.BusinessName}}" ng-click="OpenngDiologBP_Capacity($event)" class="btn btn-xs">  </a>*@
                        </td>
                        <td>{{b.Month1}}</td>
                        <td>{{b.Month2}}</td>
                        <td>{{b.Month3}}</td>
                        <td>{{b.Month4}}</td>
                        <td>{{b.Month5}}</td>
                        <td>{{b.Month6}}</td>
                        <td>{{b.Month7}}</td>
                        <td>{{b.Month8}}</td>
                        <td>{{b.Month9}}</td>
                        <td>{{b.Month10}}</td>
                        <td>{{b.Month11}}</td>
                        <td>{{b.Month12}}</td>
                    </tr>
                </thead>
            </table>
        </script>
        @*--------------- Close*@

    </div>

</div>

<script src="~/Content/Configuration/js/index.js"></script>
